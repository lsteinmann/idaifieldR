<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Importing Data from Field Desktop / iDAI.field into R • idaifieldR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Importing Data from Field Desktop / iDAI.field into R">
<meta name="description" content="idaifieldR imports data from the iDAI.field / Field Desktop database into R. The core functions of this package use the API of CouchDB to query a syncing Field Desktop client and store the whole database or a subset in a list in R (in memory), avoiding the csv-export. The package offers functions to simplify and reformat that data somewhat. Any R-Script using idaifieldR to import the database can be re-run and updated with new data flexibly without exporting from the Client itself.">
<meta property="og:description" content="idaifieldR imports data from the iDAI.field / Field Desktop database into R. The core functions of this package use the API of CouchDB to query a syncing Field Desktop client and store the whole database or a subset in a list in R (in memory), avoiding the csv-export. The package offers functions to simplify and reformat that data somewhat. Any R-Script using idaifieldR to import the database can be re-run and updated with new data flexibly without exporting from the Client itself.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">idaifieldR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Demo.html">How to use this package: Detailed Workflow</a></li>
    <li><a class="dropdown-item" href="articles/TLDR.html">TLDR: Essential Workflow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lsteinmann/idaifieldR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="idaifieldr-">idaifieldR <a href="https://lsteinmann.github.io/idaifieldR/"><img src="reference/figures/idaifieldr_hex_small.png" align="right" height="150"></a>
<a class="anchor" aria-label="anchor" href="#idaifieldr-"></a>
</h1></div>
<!-- badges: start -->

<p>The R-package <strong>idaifieldR</strong> imports data from the <a href="https://github.com/dainst/idai-field" class="external-link">iDAI.field 2 / Field Desktop database</a> into R without the hassle of CSV-exports. This package uses the <a href="https://docs.couchdb.org/en/stable/api/database/index.html" class="external-link">CouchDB-API</a> to connect to your running Field Desktop client and store the entire database (or just a subset) in a list right in R’s memory. With idaifieldR, you can update your data on-the-fly and flexibly re-run any R-script.</p>
<p>In addition to importing data, idaifieldR also offers some formatting to enhance processing in R. The relevant functions replace UUIDs with the corresponding identifiers, unnest lists, and reformat the geometry to be compatible with, e.g., the <a href="https://cran.r-project.org/web/packages/sp/index.html" class="external-link">sp</a>-package. For more information, check out the Demo-Vignette. It’s worth noting that processing all resources from larger databases can be time-consuming and memory-intensive, so I recommend only processing the subsets actually needed for your analyses.</p>
</div>
<div class="section level1">
<h1 id="key-features">Key Features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h1>
<ul>
<li>Import from a running iDAI.field 2 or 3 (Field Desktop) client into R</li>
<li>Query it, or get the complete project database into R</li>
<li>Automatically format the data for easier processing</li>
<li>Get metadata such as creation and modification dates by user</li>
<li>Just like anything done with R: <strong>easily re-run any analyses when your data has changed!</strong>
</li>
</ul>
</div>
<div class="section level1">
<h1 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h1>
<p>idaifieldR needs a syncing <a href="https://github.com/dainst/idai-field" class="external-link">iDAI.field/Field Desktop-Client</a> on the same computer or in the same network to work. Other than that, the package depends on <a href="https://cran.r-project.org/web/packages/crul/index.html" class="external-link">crul</a> and <a href="https://cran.r-project.org/web/packages/jsonlite/index.html" class="external-link">jsonlite</a>, both available on CRAN and automatically installed as dependencies.</p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p>You can install the current version of idaifieldR from GitHub using <code>devtools</code> or <code>remotes</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"lsteinmann/idaifieldR"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># OR</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"lsteinmann/idaifieldR"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="basic-workflow-example">Basic Workflow Example<a class="anchor" aria-label="anchor" href="#basic-workflow-example"></a>
</h1>
<p>A demonstration of the package and some of its uses is included in the paper <a href="https://doi.org/10.34780/068b-q6c7" class="external-link">“R wie in: Reproduzierbar. Auswertung von Daten aus Field Desktop mit idaifieldR”</a> published in the <a href="https://publications.dainst.org/journals/FdAI/index" class="external-link">Forum for Digital Archaeology and Infrastructure</a> (2023, DOI: 10.34780/068b-q6c7) and the corresponding <a href="https://repo.dainst.org/dataset/digitales-supplement-zu-r-wie-in-reproduzierbar" class="external-link">supplement</a>. Alternatively, you can check out the <a href="https://lsteinmann.github.io/idaifieldR/articles/Demo.html">Demo.Rmd-vignette</a> (<code>browseVignettes("idaifieldR")</code>) or the <a href="https://lsteinmann.github.io/idaifieldR/articles/TLDR.html">TLDR.Rmd-vignette</a> for a shorter overview.</p>
<p>First, we connect to the “rtest” project using <code><a href="reference/connect_idaifield.html">connect_idaifield()</a></code> and retrieve an index of all resources using <code><a href="reference/get_field_index.html">get_field_index()</a></code>. Next, we import all resources from the database into a single list of lists using <code><a href="reference/get_idaifield_docs.html">get_idaifield_docs()</a></code>. While this provides metadata about changes and users, it can be slow and use up a lot of memory. Alternatively, we can query the database directly using <code><a href="reference/idf_query.html">idf_query()</a></code> to retrieve only the resources we need, such as all resources of the “pottery” category.</p>
<p>After importing the data, we use <code><a href="reference/simplify_idaifield.html">simplify_idaifield()</a></code> to transform the nested list into a more usable format, replacing <em>UUID</em>s with <em>identifier</em>s and converting dating fields to minimum and maximum values. If a configuration is available, variables from checkbox-fields are also converted to multiple columns with boolean values. Lastly, we can use <code><a href="reference/idaifield_as_matrix.html">idaifield_as_matrix()</a></code> to produce a matrix where each row represents a resource and each column represents a field or a checkbox value. This matrix can be easily converted into a data.frame for further analysis:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lsteinmann/idaifieldR" class="external-link">idaifieldR</a></span><span class="op">)</span></span>
<span><span class="co"># Connect to iDAI.field:</span></span>
<span><span class="va">conn</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/connect_idaifield.html">connect_idaifield</a></span><span class="op">(</span>pwd <span class="op">=</span> <span class="st">"hallo"</span>, project <span class="op">=</span> <span class="st">"rtest"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get an index of the projects database:</span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_field_index.html">get_field_index</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get all docs from the projects database:</span></span>
<span><span class="va">idaifield_docs</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_idaifield_docs.html">get_idaifield_docs</a></span><span class="op">(</span><span class="va">conn</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get only the docs of category "Pottery" from the database:</span></span>
<span><span class="va">pottery</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/idf_query.html">idf_query</a></span><span class="op">(</span><span class="va">conn</span>, field <span class="op">=</span> <span class="st">"category"</span>, value <span class="op">=</span> <span class="st">"Pottery"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Simplify the nested list: </span></span>
<span><span class="va">pottery</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/simplify_idaifield.html">simplify_idaifield</a></span><span class="op">(</span><span class="va">pottery</span>, uidlist <span class="op">=</span> <span class="va">index</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert it into a matrix:</span></span>
<span><span class="va">pottery_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/idaifield_as_matrix.html">idaifield_as_matrix</a></span><span class="op">(</span><span class="va">pottery</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Look at the result:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">pottery_mat</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="contribution">Contribution<a class="anchor" aria-label="anchor" href="#contribution"></a>
</h1>
<p>As I constantly use it for my own work, I am improving this package and trying to stay up-to-date with everything as I go. A special thanks goes to ChatGPT for helping me a lot with the documentation. Much of the code is rather old and reflects my learning process much more than good practice. However, I would be happy about any feedback – be it in the form of issues or feature requests – and would be even happier if anyone would like to collaborate on this project. If you are interested in contributing to idaifieldR, feel free to get in touch with me – or don’t, and just fork it! ;)</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lsteinmann/idaifieldR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lsteinmann/idaifieldR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing idaifieldR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lisa Steinmann <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2215-1243" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lsteinmann/idaifieldR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/lsteinmann/idaifieldR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/lsteinmann/idaifieldR?branch=main" class="external-link"><img src="https://codecov.io/gh/lsteinmann/idaifieldR/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/lsteinmann/idaifieldR/releases" class="external-link"><img src="https://img.shields.io/github/v/release/lsteinmann/idaifieldR" alt="Release"></a></li>
<li><a href="https://lsteinmann.github.io/idaifieldR/"><img src="https://img.shields.io/badge/Documentation-lsteinmann.github.io%2FidaifieldR-green" alt="Package documentation"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa Steinmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
